{#{% if user.is_authenticated %}#}
{#    <p>Welcome, {{ user.get_username }}. Thanks for logging in.</p>#}
{#{% else %}#}
{#    <p>Welcome, new user. Please log in.</p>#}
{#{% endif %}#}

{% extends 'game/base.html' %}
{% block title %}
    <title>Lobby</title>
{% endblock %}
{% block content %}
    <div style="height: 60px"></div>
    <div class="container mt-3">
        <form class="form-inline" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="inputRoomName">Room name:</label>
                <input class="ml-2 mr-2 form-control" type="text" id="inputRoomName" name="room_name" required>
            </div>
            <div class="form-group">
                <label for="inputPlayersNumber">Number of players:</label>
                <input type="number" id="inputPlayersNumber" class="ml-2 mr-2 form-control"
                       name="players_number" required>
            </div>
            <button class='btn btn-primary' type="submit">Create</button>
            {% if exists %}
                <p class="ml-3 text-danger mt-2">Room with the same name already exists.</p>
            {% endif %}
        </form>
        <div class="mt-3">
            <table class="table table-striped text-center">
                <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Current players</th>
                    <th scope="col">Expected players</th>
                    <th scope="col"></th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    {% for k, room in current_rooms.items %}
                        <tr>
                            <th scope="row">{{ room.name }}</th>
                            <td>{{ room.get_players_number }}</td>
                            <td>{{ room.expected_players_number }}</td>
                            <td><a href="/{{ room.name }}">JOIN</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
